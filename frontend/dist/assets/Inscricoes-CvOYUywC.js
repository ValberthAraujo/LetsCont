import{a as f,r,j as s,i as g}from"./index-0fLGo3W8.js";import{s as e}from"./admin.module-BibDxh5X.js";function S(){const{user:i,token:n}=f(),l=r.useMemo(()=>!!i?.is_superuser,[i]),[d,o]=r.useState(!1),[c,h]=r.useState(""),[u,x]=r.useState(0),[m,j]=r.useState([]);return r.useEffect(()=>{let t=!0;async function N(){if(!(!n||!l)){o(!0),h("");try{const a=await g(n);if(!t)return;x(Number(a?.count||0)),j(Array.isArray(a?.data)?a.data:[])}catch(a){if(!t)return;h(a?.message||"Falha ao carregar inscrições")}finally{t&&o(!1)}}}return N(),()=>{t=!1}},[n,l]),s.jsxs("div",{className:e.loginCard,children:[s.jsx("h2",{children:"Inscrições"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Total de inscritos:"})," ",d?"Carregando...":u]}),c&&s.jsx("p",{className:e.error,children:c}),!d&&!c&&s.jsx("div",{className:e.tableWrap,children:s.jsxs("table",{className:e.table,children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:e.th,children:"Nome"}),s.jsx("th",{className:e.th,children:"Email"}),s.jsx("th",{className:e.th,children:"Origem"}),s.jsx("th",{className:e.th,children:"Criado em"})]})}),s.jsxs("tbody",{children:[m.map(t=>s.jsxs("tr",{children:[s.jsx("td",{className:e.td,children:t.nome}),s.jsx("td",{className:e.td,children:t.email}),s.jsx("td",{className:e.td,children:t.origem}),s.jsx("td",{className:e.td,children:t.created_at?new Date(t.created_at).toLocaleString():"-"})]},t.id)),m.length===0&&s.jsx("tr",{children:s.jsx("td",{className:`${e.td} ${e.tdCenter}`,colSpan:4,children:"Nenhuma inscrição encontrada."})})]})]})})]})}export{S as PanelInscricoes,S as default};
